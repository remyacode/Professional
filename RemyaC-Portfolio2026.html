<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remya C | Interactive Digital Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Font Import - Inter for clean, modern look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #fafaf9; /* stone-50 */
            color: #44403c; /* stone-700 */
        }

        /* Chart Container Styles - Strictly following requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Utilities */
        .glass-panel {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(231, 229, 228, 0.5);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }

        .timeline-line {
            position: absolute;
            left: 24px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #d6d3d1; /* stone-300 */
            z-index: 0;
        }

        .active-filter {
            background-color: #ea580c; /* orange-600 */
            color: white;
        }

        .inactive-filter {
            background-color: #e7e5e4; /* stone-200 */
            color: #44403c; /* stone-700 */
        }
        
        .inactive-filter:hover {
            background-color: #d6d3d1; /* stone-300 */
        }

        /* Smooth transitions */
        .transition-all-300 {
            transition: all 0.3s ease-in-out;
        }

        /* Modal specific styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 24px;
            border-radius: 12px;
            max-width: 600px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Modal for AI Summary -->
    <div id="aiSummaryModal" class="modal">
        <div class="modal-content w-11/12">
            <span class="close-btn" onclick="closeModal('aiSummaryModal')">&times;</span>
            <h3 class="text-2xl font-bold text-stone-800 mb-4 flex items-center">
                ‚ú® AI Executive Summary
            </h3>
            <p class="text-stone-600 mb-4">
                This concise summary, generated by Gemini, synthesizes Remya's core value proposition, experience, and key technical domains.
            </p>
            <div id="summaryContent" class="p-4 bg-stone-50 rounded-lg border border-stone-200 min-h-[100px] text-stone-700">
                <p class="text-stone-500 italic">Summary will appear here after generation...</p>
            </div>
            <div id="summaryLoading" class="hidden text-center mt-4 text-orange-600 font-semibold">
                Generating summary...
            </div>
        </div>
    </div>

    <!-- Modal for Job Matcher Result -->
    <div id="matcherResultModal" class="modal">
        <div class="modal-content w-11/12">
            <span class="close-btn" onclick="closeModal('matcherResultModal')">&times;</span>
            <h3 class="text-2xl font-bold text-stone-800 mb-4 flex items-center">
                ‚ú® Job Fit Analysis
            </h3>
            <div id="matcherContent" class="space-y-4">
                <!-- Results injected here -->
            </div>
            <div id="matcherLoading" class="hidden text-center mt-4 text-orange-600 font-semibold">
                Analyzing match...
            </div>
        </div>
    </div>


    <!-- Navigation -->
    <nav class="sticky top-0 z-50 glass-panel border-b border-stone-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-stone-800 tracking-tight">Remya C<span class="text-orange-600">.</span></span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('dashboard')" class="text-stone-600 hover:text-orange-600 transition-colors">Skills & Match</button>
                    <button onclick="scrollToSection('timeline')" class="text-stone-600 hover:text-orange-600 transition-colors">Experience</button>
                    <button onclick="scrollToSection('projects')" class="text-stone-600 hover:text-orange-600 transition-colors">Projects</button>
                    <button onclick="scrollToSection('certs')" class="text-stone-600 hover:text-orange-600 transition-colors">Certifications</button>
                </div>
                <!-- Mobile Menu Button (simplified for SPA) -->
                <button onclick="toggleMobileMenu()" class="md:hidden text-stone-600 text-2xl">‚ò∞</button>
            </div>
            <!-- Mobile Menu Dropdown -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <button onclick="scrollToSection('dashboard')" class="block py-2 text-stone-600">Skills & Match</button>
                <button onclick="scrollToSection('timeline')" class="block py-2 text-stone-600">Experience</button>
                <button onclick="scrollToSection('projects')" class="block py-2 text-stone-600">Projects</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-stone-50 pt-16 pb-12 lg:pt-24 lg:pb-20 px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto text-center">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-stone-900 mb-6 tracking-tight">
                Associate Salesforce Developer & <br>
                <span class="text-orange-600">Automation Architect</span>
            </h1>
            <p class="text-xl text-stone-600 mb-8 max-w-2xl mx-auto leading-relaxed">
                Transforming complex business requirements into scalable solutions using 
                <span class="font-semibold text-stone-800">Salesforce (Apex, LWC)</span>, 
                <span class="font-semibold text-stone-800">Shopify</span>, and 
                <span class="font-semibold text-stone-800">GenAI Automation</span>.
                Co-founder experience with a proven track record in full-stack implementation.
            </p>
            <div class="flex justify-center gap-4 flex-wrap">
                <button onclick="generateSummary()" class="px-8 py-3 bg-orange-600 text-white font-medium rounded-full hover:bg-orange-700 transition-all-300 shadow-lg flex items-center">
                    ‚ú® Generate AI Profile Summary
                </button>
                <a href="mailto:remyachandrasekhar710@gmail.com" class="px-8 py-3 bg-stone-900 text-white font-medium rounded-full hover:bg-orange-600 transition-all-300 shadow-lg">
                    Contact Me
                </a>
            </div>
            <!-- Quick Stats -->
            <div class="mt-12 grid grid-cols-2 md:grid-cols-4 gap-6 max-w-3xl mx-auto">
                <div class="p-4 bg-white rounded-xl shadow-sm border border-stone-100">
                    <div class="text-3xl font-bold text-orange-600">2+</div>
                    <div class="text-sm text-stone-500">Years Exp</div>
                </div>
                <div class="p-4 bg-white rounded-xl shadow-sm border border-stone-100">
                    <div class="text-3xl font-bold text-orange-600">5+</div>
                    <div class="text-sm text-stone-500">Certifications</div>
                </div>
                <div class="p-4 bg-white rounded-xl shadow-sm border border-stone-100">
                    <div class="text-3xl font-bold text-orange-600">100%</div>
                    <div class="text-sm text-stone-500">Automation</div>
                </div>
                <div class="p-4 bg-white rounded-xl shadow-sm border border-stone-100">
                    <div class="text-3xl font-bold text-orange-600">M+</div>
                    <div class="text-sm text-stone-500">Content Views</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Dashboard Section (Skills Analysis & Matcher) -->
    <section id="dashboard" class="py-16 bg-white border-t border-stone-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-4">
                <h2 class="text-3xl font-bold text-stone-900 mb-4">Technical Proficiency Analysis & Job Matcher</h2>
                <p class="text-stone-600 max-w-3xl">
                    This dashboard visualizes my technical core and offers an interactive tool to assess fit for a specific role.
                </p>
            </div>

            <!-- Message Container for validation errors (Replaces alert()) -->
            <div id="messageContainer" class="max-w-6xl mx-auto"></div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 items-start">
                
                <!-- Matcher Input (Gemini Feature 2) -->
                <div class="lg:col-span-1 bg-stone-50 p-6 rounded-xl border border-stone-200 shadow-lg">
                    <h3 class="text-xl font-semibold text-stone-800 mb-4 flex items-center">
                        <span class="mr-2 text-2xl">üîç</span> ‚ú® Job Description Matcher
                    </h3>
                    <p class="text-sm text-stone-600 mb-3">
                        Paste a Job Description below to get an instant, AI-driven fit analysis based on Remya's portfolio data.
                    </p>
                    <textarea id="jobDescriptionInput" rows="6" placeholder="Paste Full Job Description here (e.g., Salesforce Developer, Automation Specialist, etc.)" class="w-full p-3 border border-stone-300 rounded-lg focus:ring-orange-500 focus:border-orange-500 text-sm"></textarea>
                    <button onclick="analyzeJobMatch()" class="mt-3 w-full px-4 py-2 bg-stone-900 text-white font-medium rounded-lg hover:bg-orange-600 transition-all-300 shadow-md">
                        Analyze Fit
                    </button>
                </div>
                
                <!-- Chart 1: Domain Expertise -->
                <div class="lg:col-span-2">
                    <h3 class="text-xl font-semibold text-stone-800 mb-6 flex items-center">
                        <span class="mr-2">‚ö°</span> Domain Focus Distribution
                    </h3>
                    <div class="chart-container">
                        <canvas id="domainChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-stone-500 text-center italic">
                        Distribution of professional focus across key technology domains. Hover for details.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Timeline Section (Experience) -->
    <section id="timeline" class="py-16 bg-stone-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-12 text-center">
                <h2 class="text-3xl font-bold text-stone-900 mb-4">Professional Timeline</h2>
                <p class="text-stone-600">A chronological view of my career path from Engineering student to Associate Salesforce Developer and Co-founder.</p>
            </div>

            <div class="relative pl-8 sm:pl-12" id="timeline-container">
                <!-- Line -->
                <div class="timeline-line rounded-full"></div>

                <!-- Timeline items will be injected by JS -->
            </div>
        </div>
    </section>

    <!-- Projects Section (Portfolio) -->
    <section id="projects" class="py-16 bg-white border-t border-stone-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-10 flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <h2 class="text-3xl font-bold text-stone-900 mb-2">Project Portfolio</h2>
                    <p class="text-stone-600">Explore selected works. Filter by technology stack.</p>
                </div>
                <!-- Filters -->
                <div class="flex flex-wrap gap-2 justify-center" id="project-filters">
                    <button class="filter-btn active-filter px-4 py-2 rounded-full text-sm font-medium transition-all" data-filter="all">All</button>
                    <button class="filter-btn inactive-filter px-4 py-2 rounded-full text-sm font-medium transition-all" data-filter="salesforce">Salesforce</button>
                    <button class="filter-btn inactive-filter px-4 py-2 rounded-full text-sm font-medium transition-all" data-filter="automation">Automation/AI</button>
                    <button class="filter-btn inactive-filter px-4 py-2 rounded-full text-sm font-medium transition-all" data-filter="ecommerce">E-commerce</button>
                </div>
            </div>

            <!-- Projects Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="projects-grid">
                <!-- Cards injected via JS -->
            </div>
        </div>
    </section>

    <!-- Certifications Section -->
    <section id="certs" class="py-16 bg-stone-900 text-stone-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-12 text-center">
                <h2 class="text-3xl font-bold text-white mb-4">Certifications & Accreditations</h2>
                <p class="text-stone-400">Validated expertise through recognized industry credentials.</p>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="certs-grid">
                <!-- Certs injected via JS -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-stone-950 py-12 text-center border-t border-stone-800">
        <div class="max-w-4xl mx-auto px-4">
            <p class="text-stone-500 mb-4">&copy; 2025 Remya C. All rights reserved.</p>
            <div class="flex justify-center gap-6">
                <a href="#" class="text-stone-400 hover:text-white transition-colors">LinkedIn</a>
                <a href="#" class="text-stone-400 hover:text-white transition-colors">GitHub</a>
                <a href="mailto:remyachandrasekhar710@gmail.com" class="text-stone-400 hover:text-white transition-colors">Email</a>
            </div>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- API Configuration ---
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=`;
        const API_KEY = ""; // Canvas will provide this

        // --- Data Store (Updated to reflect latest experience structure) ---
        const resumeData = {
            name: "Remya C",
            title: "Associate Salesforce Developer & Automation Architect",
            summary: "Specializing in Salesforce development (Apex, LWC) and implementing sophisticated GenAI-powered automation workflows. Proven co-founder experience in e-commerce (Shopify).",
            coreSkills: ["Salesforce", "Apex", "LWC", "Triggers", "Batch Apex", "Shopify", "Liquid", "n8n", "Activepieces", "Zapier", "Claude AI API", "NodeJS", "JavaScript", "Python"],
            experience: [
                {
                    role: "Associate Salesforce Developer",
                    company: "Tryzens Global",
                    period: "March 2024 ‚Äì Present",
                    desc: "Focusing on Salesforce Order Management System (OMS) for a major book publisher.",
                    details: [
                        "Developed robust Apex Triggers and Batch Jobs to automate invoicing.",
                        "Built custom UI using Lightning Web Components (LWC).",
                        "Managed complex integrations ensuring seamless data flow."
                    ]
                },
                {
                    role: "Co-founder & CTO, Sashel.in Marketplace",
                    company: "Self-Employed / Entrepreneurship",
                    period: "2025 (3 months)",
                    desc: "Built and launched the entire multi-vendor jewellery e-commerce platform on Shopify.",
                    details: [
                        "Architected and deployed Shopify platform, logistics (Shiprocket), Google business and payment integration (Razorpay).",
                        "Implemented complex Activepieces automations for order splitting and logistics, serving multiple vendors."
                    ]
                },
                {
                    role: "Shopify Developer Training",
                    company: "Tryzens Global", // Corrected per user request
                    period: "April 2024 ‚Äì Present", // Reverted period to be safer, keeping company updated
                    desc: "Deep dive into the Shopify ecosystem and custom app development.",
                    details: [
                        "Executed complex UI customizations.",
                        "Developed custom sections and utilized Metafields.",
                        "Learned Liquid templating and Shopify APIs."
                    ]
                },
                {
                    role: "Content & Prompting Strategist",
                    company: "The SmartBot Club",
                    period: "2024 ‚Äì Present",
                    desc: "Leveraging AI for viral content creation.",
                    details: [
                        "Applied advanced AI prompting strategies (Claude AI API).",
                        "Analyzed audience insights to achieve multi-million views.",
                        "Optimized Instagram reach strategies."
                    ]
                },
                {
                    role: "Salesforce Developer Intern",
                    company: "Tryzens Global",
                    period: "Oct 2023 ‚Äì March 2024",
                    desc: "Initial entry into the Salesforce ecosystem.",
                    details: [
                        "Customized Salesforce applications using Apex.",
                        "Worked with Visualforce and standard configurations.",
                        "Adhered to strict code quality standards."
                    ]
                },
                {
                    role: "B.Tech Computer Science",
                    company: "College of Engineering Chengannur",
                    period: "2018 ‚Äì 2022",
                    desc: "Graduated with 8.12 CGPA. Lead roles in Placement Cell & IEEE.",
                    details: []
                }
            ],
            projects: [
                {
                    title: "Order Management System",
                    role: "Developer",
                    category: ["salesforce"],
                    tech: ["Apex", "LWC", "Batch Apex", "Triggers"],
                    desc: "Critical OMS for a publisher. Automating order handling and invoicing, reducing manual effort significantly."
                },
                {
                    title: "CSR Volunteering Platform",
                    role: "Contributor",
                    category: ["automation", "salesforce"],
                    tech: ["Flutterflow", "n8n", "Claude AI API", "Salesforce"],
                    desc: "Internal platform using GenAI for matching logic and Salesforce for user data management."
                },
                {
                    title: "E-commerce Automation",
                    role: "Engineer",
                    category: ["automation"],
                    tech: ["Zapier", "Webhooks"],
                    desc: "Workflow automation for order splitting, vendor notifications, and invoice generation."
                },
                {
                    title: "Helmet Detection System",
                    role: "Lead Developer",
                    category: ["ai"],
                    tech: ["YOLOv5", "OpenCV", "Tesseract", "MySQL"],
                    desc: "Deep learning system to capture riders without helmets and extract license plates via OCR."
                }
            ],
            certs: [
                { name: "Salesforce Platform Developer I", date: "Nov 2025 (Exp)", icon: "‚òÅÔ∏è" },
                { name: "Salesforce Agentforce Specialist", date: "Jan 2025", icon: "ü§ñ" },
                { name: "Salesforce AI Associate", date: "Dec 2024", icon: "üß†" },
                { name: "Shopify Fundamentals Badge", date: "Sept 2025", icon: "üõçÔ∏è" }
            ]
        };

        // --- Utility Functions ---
        function getFullProfileText() {
            let text = `Profile of ${resumeData.name}, currently titled ${resumeData.title}.\n\n`;
            text += "--- Summary ---\n" + resumeData.summary + "\n\n";
            text += "--- Core Skills ---\n" + resumeData.coreSkills.join(", ") + "\n\n";

            text += "--- Professional Experience ---\n";
            resumeData.experience.forEach(exp => {
                text += `${exp.role} at ${exp.company} (${exp.period}): ${exp.desc}. Key duties: ${exp.details.join('; ')}.\n`;
            });
            text += "\n";

            text += "--- Key Projects ---\n";
            resumeData.projects.forEach(proj => {
                text += `${proj.title} (Role: ${proj.role}, Category: ${proj.category.join('/')}, Tech: ${proj.tech.join(', ')}): ${proj.desc}.\n`;
            });
            return text;
        }

        async function fetchWithRetry(url, options, maxRetries = 3) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) {
                        // Log detailed error but continue to throw so outer function catches it.
                        console.error(`Gemini API HTTP Error Status: ${response.status}`);
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return await response.json();
                } catch (error) {
                    if (i === maxRetries - 1) {
                        console.error("Max retries reached. Failing request.", error);
                        throw error;
                    }
                    const delay = Math.pow(2, i) * 1000;
                    // Do not log retry attempts as errors in the console per instructions
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }
        
        // Non-blocking message display utility (replaces alert())
        function showMessage(text, type = 'error') {
            const container = document.getElementById('messageContainer');
            if (!container) return; 

            // Clear previous message
            container.innerHTML = '';
            
            const messageElement = document.createElement('div');
            messageElement.className = `p-3 rounded-lg text-sm transition-all duration-300 transform ${type === 'error' ? 'bg-red-100 text-red-700 shadow-md' : 'bg-green-100 text-green-700 shadow-md'}`;
            messageElement.textContent = text;
            
            container.appendChild(messageElement);
            
            // Auto-hide the message after 5 seconds
            setTimeout(() => { 
                container.innerHTML = '';
            }, 5000);
        }

        // --- API Feature 1: AI Summary Generator ---
        async function generateSummary() {
            openModal('aiSummaryModal');
            document.getElementById('summaryContent').innerHTML = '<p class="text-stone-500 italic">Generating...</p>';
            document.getElementById('summaryLoading').classList.remove('hidden');

            const profileText = getFullProfileText();
            const systemPrompt = "You are an Executive Profile Analyst. Your task is to review the provided candidate data and generate a highly professional, 3-4 sentence executive summary. This summary must highlight their hybrid expertise in Salesforce Development, Automation/AI, and E-commerce, emphasizing their value proposition for a modern tech role.";

            const payload = {
                contents: [{ parts: [{ text: `Analyze the following professional profile data and generate the summary:\n\n${profileText}` }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const response = await fetchWithRetry(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const text = response.candidates?.[0]?.content?.parts?.[0]?.text || "Error: Could not generate summary.";
                document.getElementById('summaryContent').innerHTML = `<p class="leading-relaxed">${text}</p>`;

            } catch (error) {
                console.error("Gemini API Error:", error);
                document.getElementById('summaryContent').innerHTML = '<p class="text-red-500">Failed to generate summary due to API error. Check the console for details.</p>';
            } finally {
                document.getElementById('summaryLoading').classList.add('hidden');
            }
        }

        // --- API Feature 2: Job Matcher ---
        async function analyzeJobMatch() {
            const jobDescription = document.getElementById('jobDescriptionInput').value.trim();
            if (!jobDescription) {
                // Using non-blocking message instead of alert()
                showMessage("Please paste a job description into the text area first.", 'error');
                return;
            }

            openModal('matcherResultModal');
            document.getElementById('matcherContent').innerHTML = '';
            document.getElementById('matcherLoading').classList.remove('hidden');

            const profileText = getFullProfileText();
            const systemPrompt = "You are a professional HR Analyst. Your goal is to compare the candidate's profile against a provided Job Description (JD). You must produce a structured JSON object detailing the match score, rationale, and top skills match, strictly adhering to the provided JSON schema.";

            const userQuery = `Candidate Profile:\n\n${profileText}\n\nJob Description to Analyze:\n\n${jobDescription}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "OBJECT",
                        properties: {
                            matchScore: { type: "NUMBER", description: "Overall fit percentage (0-100) based on skills and experience alignment." },
                            matchRationale: { type: "STRING", description: "A concise 2-3 sentence explanation of the score, focusing on key strengths and potential gaps." },
                            topSkillMatches: {
                                type: "ARRAY",
                                items: { type: "STRING" },
                                description: "List the top 4 most relevant hard skills from the candidate's profile that match the JD."
                            },
                            relevantProjects: {
                                type: "ARRAY",
                                items: { type: "STRING" },
                                description: "List the titles of the 2 most relevant projects mentioned in the candidate's profile for this JD."
                            }
                        }
                    }
                }
            };

            try {
                const response = await fetchWithRetry(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const jsonText = response.candidates?.[0]?.content?.parts?.[0]?.text;
                if (!jsonText) throw new Error("API returned no content or invalid structure.");
                
                const result = JSON.parse(jsonText);
                displayMatchResult(result);

            } catch (error) {
                console.error("Gemini API Error:", error);
                document.getElementById('matcherContent').innerHTML = '<p class="text-red-500">Failed to analyze job match due to API or parsing error.</p>';
            } finally {
                document.getElementById('matcherLoading').classList.add('hidden');
            }
        }

        function displayMatchResult(result) {
            const container = document.getElementById('matcherContent');
            container.innerHTML = `
                <div class="p-4 rounded-xl border-2 border-orange-200 bg-orange-50">
                    <h4 class="text-3xl font-extrabold text-orange-600 mb-1">${result.matchScore}%</h4>
                    <p class="text-sm font-semibold text-orange-700">Overall Fit Score</p>
                </div>
                
                <div class="p-4 bg-stone-50 rounded-lg border border-stone-200">
                    <h4 class="font-bold text-stone-800 mb-2">Rationale:</h4>
                    <p class="text-stone-600 text-sm">${result.matchRationale}</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="p-4 bg-white rounded-lg border border-stone-200 shadow-sm">
                        <h4 class="font-bold text-stone-800 mb-2 flex items-center">Top Skills Matched:</h4>
                        <ul class="list-disc pl-5 text-stone-600 text-sm space-y-1">
                            ${result.topSkillMatches.map(s => `<li>${s}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="p-4 bg-white rounded-lg border border-stone-200 shadow-sm">
                        <h4 class="font-bold text-stone-800 mb-2 flex items-center">Most Relevant Projects:</h4>
                        <ul class="list-disc pl-5 text-stone-600 text-sm space-y-1">
                            ${result.relevantProjects.map(p => `<li>${p}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
        }
        
        // --- Modal Control ---
        function openModal(id) {
            document.getElementById(id).style.display = 'block';
        }

        function closeModal(id) {
            document.getElementById(id).style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = "none";
            }
        }


        // --- Render Functions ---

        function renderTimeline() {
            const container = document.getElementById('timeline-container');
            let html = '<div class="timeline-line rounded-full"></div>';
            
            resumeData.experience.forEach((job, index) => {
                html += `
                <div class="relative mb-10 group">
                    <div class="absolute -left-[54px] sm:-left-[58px] top-1 h-12 w-12 rounded-full bg-white border-4 border-stone-200 flex items-center justify-center z-10 group-hover:border-orange-500 transition-colors">
                        <span class="text-lg text-stone-500 group-hover:text-orange-600">‚óè</span>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 hover:shadow-md transition-all cursor-pointer" onclick="toggleDetails('job-${index}')">
                        <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-2">
                            <h3 class="text-xl font-bold text-stone-800">${job.role}</h3>
                            <span class="text-sm text-orange-600 font-medium bg-orange-50 px-3 py-1 rounded-full w-fit mt-2 sm:mt-0">${job.period}</span>
                        </div>
                        <h4 class="text-md text-stone-500 font-semibold mb-3">${job.company}</h4>
                        <p class="text-stone-600 mb-2">${job.desc}</p>
                        
                        ${job.details.length > 0 ? `
                        <div id="job-${index}" class="hidden mt-4 pt-4 border-t border-stone-100">
                            <ul class="list-disc pl-5 space-y-2 text-stone-600 text-sm">
                                ${job.details.map(d => `<li>${d}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="mt-2 text-xs text-orange-500 font-semibold uppercase tracking-wide">
                            ${job.details.length > 0 ? 'Click to expand/collapse' : ''}
                        </div>
                        ` : ''}
                    </div>
                </div>
                `;
            });
            container.innerHTML = html;
        }

        function toggleDetails(id) {
            const el = document.getElementById(id);
            if(el) {
                el.classList.toggle('hidden');
            }
        }

        function renderProjects(filter = 'all') {
            const container = document.getElementById('projects-grid');
            container.innerHTML = '';
            
            const filtered = filter === 'all' 
                ? resumeData.projects 
                : resumeData.projects.filter(p => p.category.includes(filter) || (filter === 'automation' && p.category.includes('ai')));

            filtered.forEach(p => {
                const techTags = p.tech.map(t => `<span class="px-2 py-1 text-xs bg-stone-100 text-stone-600 rounded-md">${t}</span>`).join('');
                
                const card = `
                <div class="bg-white rounded-xl overflow-hidden border border-stone-200 shadow-sm hover:shadow-lg transition-all-300 flex flex-col h-full">
                    <div class="p-6 flex-grow">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-lg font-bold text-stone-800 leading-tight">${p.title}</h3>
                            <span class="text-xs bg-stone-900 text-white px-2 py-1 rounded">${p.role}</span>
                        </div>
                        <p class="text-stone-600 text-sm mb-4 leading-relaxed">${p.desc}</p>
                        <div class="flex flex-wrap gap-2 mt-auto">
                            ${techTags}
                        </div>
                    </div>
                    <div class="px-6 py-4 bg-stone-50 border-t border-stone-100 flex justify-between items-center">
                        <span class="text-xs text-stone-400 font-medium uppercase tracking-wider">Project</span>
                        <button class="text-orange-600 hover:text-orange-800 text-sm font-medium">View Details &rarr;</button>
                    </div>
                </div>
                `;
                container.innerHTML += card;
            });
        }

        function renderCerts() {
            const container = document.getElementById('certs-grid');
            resumeData.certs.forEach(c => {
                const html = `
                <div class="bg-stone-800 p-6 rounded-lg border border-stone-700 hover:border-orange-500 transition-colors group">
                    <div class="text-3xl mb-3 group-hover:scale-110 transition-transform duration-300 origin-left">${c.icon}</div>
                    <h4 class="text-white font-bold mb-1">${c.name}</h4>
                    <p class="text-stone-400 text-sm">${c.date}</p>
                </div>
                `;
                container.innerHTML += html;
            });
        }

        // --- Chart Config ---
        function initCharts() {
            const ctx = document.getElementById('domainChart').getContext('2d');
            
            // Warm neutral palette for chart
            const colors = {
                salesforce: 'rgba(234, 88, 12, 0.8)', // Orange-600
                automation: 'rgba(56, 189, 248, 0.8)', // Sky-400
                web: 'rgba(16, 185, 129, 0.8)', // Emerald-500
                ai: 'rgba(139, 92, 246, 0.8)'   // Violet-500
            };

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Salesforce', 'Automation/Integration', 'Web/Shopify', 'AI/Prompting'],
                    datasets: [{
                        data: [40, 25, 25, 10], // Estimated split based on resume content
                        backgroundColor: [
                            colors.salesforce,
                            colors.automation,
                            colors.web,
                            colors.ai
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: "'Inter', sans-serif",
                                    size: 12
                                },
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(41, 37, 36, 0.9)', // stone-800
                            titleFont: { family: 'Inter', size: 14 },
                            bodyFont: { family: 'Inter', size: 13 },
                            padding: 12,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    return ' ' + context.label + ': ' + context.raw + '% Focus';
                                }
                            }
                        }
                    },
                    cutout: '70%',
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }

        // --- Event Listeners ---
        function setupFilters() {
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Update UI classes
                    buttons.forEach(b => {
                        b.classList.remove('active-filter');
                        b.classList.add('inactive-filter');
                    });
                    e.target.classList.remove('inactive-filter');
                    e.target.classList.add('active-filter');

                    // Filter logic
                    renderProjects(e.target.dataset.filter);
                });
            });
        }

        function scrollToSection(id) {
            const el = document.getElementById(id);
            const offset = 80; // height of nav
            const bodyRect = document.body.getBoundingClientRect().top;
            const elementRect = el.getBoundingClientRect().top;
            const elementPosition = elementRect - bodyRect;
            const offsetPosition = elementPosition - offset;

            window.scrollTo({
                top: offsetPosition,
                behavior: "smooth"
            });
            
            // Close mobile menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderTimeline();
            renderProjects();
            renderCerts();
            initCharts();
            setupFilters();
        });

    </script>
</body>
</html>
